<% action_links ||= active_scaffold_config.action_links.member %>
<td class="actions"><table cellpadding="0" cellspacing="0">
  <tr>
    <td class="indicator-container">
      <%= loading_indicator_tag(:action => :record, :id => record.id) %>
    </td>
      <% level = 0 %>
      <% action_links.traverse(controller, {:record => record}) do |parent, link, options| -%>
        <% tag = (level == 0 ? 'td' : 'li') %>
        <% if (options[:node] == :finished_traversing) -%>
          <% level -= 1 %>
          <%= "</ul></#{(level == 0 ? 'td' : 'li')}>".html_safe %>
        <% elsif (options[:node] == :start_traversing) -%>
          <%= "<#{tag} #{"class=\"action_list\"" if tag == 'td'}> #{content_tag('span', parent.name)}<ul>".html_safe %>
          <% level += 1 %>
        <% else -%>
          <%= content_tag(tag, options[:authorized] ? render_action_link(link, url_options, record) : action_link_html(link, nil, {:class => "disabled #{link.action}#{link.html_options[:class].blank? ? '' : (' ' + link.html_options[:class])}"})) %>
        <% end -%>
      <% end -%>
  </tr>
</table>
</td>

